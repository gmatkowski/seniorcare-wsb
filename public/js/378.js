(self.webpackChunk=self.webpackChunk||[]).push([[378],{9895:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(7757),o=r.n(n);function a(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,c,"next",e)}function c(e){a(i,n,o,s,c,"throw",e)}s(void 0)}))}}const s={data:function(){return{isLoading:!1,total:0,options:{},items:[],calls:{listing:(e=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise);case 1:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}};var e},watch:{options:{handler:function(){var e=this;return i(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDataFromApi();case 2:case"end":return t.stop()}}),t)})))()},deep:!0}},methods:{resetTable:function(){this.items=[],this.total=0},refreshTable:function(){var e=this;return i(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.options.page=1,e.resetTable(),t.next=4,e.getDataFromApi();case 4:case"end":return t.stop()}}),t)})))()},getDataFromApi:function(){var e=this;return i(o().mark((function t(){var r,n,a,i,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.resetTable(),e.isLoading=!0,r=e.options,r.sortBy,r.sortDesc,n=r.page,a=r.itemsPerPage,t.next=6,e.calls.listing(n,a);case 6:return i=t.sent,s=i.data,e.isLoading=!1,t.next=11,s.data;case 11:e.items=t.sent,e.total=s.meta.total,t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),e.isLoading=!1;case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()}}}},6356:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(7757),o=r.n(n),a=r(7691),i=r(629);function s(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p={mixins:[a.Z],props:{id:{required:!0,type:String}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,i.Se)({isSenior:"auth/isSenior",isSupporter:"auth/isSupporter"})),data:function(){return{order:null}},beforeMount:function(){var e,t=this;return(e=o().mark((function e(){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$apiOrder.get(t.id);case 3:r=e.sent,n=r.data,t.order=n.data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.handleErrors(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){s(a,n,o,i,c,"next",e)}function c(e){s(a,n,o,i,c,"throw",e)}i(void 0)}))})()}};const l=(0,r(1900).Z)(p,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.order?r("v-row",{staticClass:"pa-10"},[e.isSupporter||e.order.supporter?r("v-col",[e.isSupporter?[r("h3",[e._v("Adres zamawiającego:")]),e._v("\n            "+e._s(e.order.user.first_name)+" "+e._s(e.order.user.last_name)+" "),r("br"),e._v("\n            "+e._s(e.order.user.address)+" "),r("br"),e._v("\n            "+e._s(e.order.user.city)+" "+e._s(e.order.user.postcode)+" "),r("br"),e._v(" "),r("div",{staticClass:"text-overline"},[e._v("Telefon:")]),e._v("\n            "+e._s(e.order.user.phone)+"\n        ")]:e._e(),e._v(" "),e.isSenior&&e.order.supporter?[r("h3",[e._v("Dostarczający:")]),e._v("\n            "+e._s(e.order.supporter.first_name)+" "+e._s(e.order.supporter.last_name)+" "),r("br"),e._v(" "),r("div",{staticClass:"text-overline"},[e._v("Telefon:")]),e._v("\n            "+e._s(e.order.supporter.phone)+"\n        ")]:e._e()],2):e._e(),e._v(" "),r("v-col",[r("h3",[e._v("Zamówione produkty:")]),e._v(" "),r("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left"}),e._v(" "),r("th",{staticClass:"text-left"},[e._v("\n                        Produkt\n                    ")]),e._v(" "),r("th",{staticClass:"text-left"},[e._v("\n                        Cena\n                    ")]),e._v(" "),r("th",{staticClass:"text-left"},[e._v("\n                        Ilość\n                    ")])])]),e._v(" "),r("tbody",e._l(e.order.products,(function(t,n){return r("tr",{key:n,staticClass:"pa-2"},[r("td",[r("v-img",{attrs:{src:t.image_url,height:"30","aspect-ratio":"1.7"}})],1),e._v(" "),r("td",[e._v(e._s(t.name))]),e._v(" "),r("td",[e._v(e._s(t.price)+" PLN")]),e._v(" "),r("td",[e._v(" "+e._s(t.pivot.quantity)+" "+e._s(t.symbol))])])})),0)]},proxy:!0}],null,!1,2638337011)})],1)],1):e._e()}),[],!1,null,null,null).exports},378:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var n=r(629),o=r(7757),a=r.n(o),i=r(9895),s=r(7691),c=r(6356);function u(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){u(a,n,o,i,s,"next",e)}function s(e){u(a,n,o,i,s,"throw",e)}i(void 0)}))}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d={components:{ExpandedComponent:c.Z},mixins:[i.Z,s.Z],computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,n.Se)({user:"auth/user"})),data:function(){var e,t=this;return{options:{},headers:[{text:"Wartość zamówienia",value:"price",sortable:!1},{text:"Dostarczający",value:"supporter_id",sortable:!1},{text:"Status",value:"status",sortable:!1},{text:"Data złożenia zamówienia",value:"created_at",sortable:!1},{text:"Ostatnio zmieniono",value:"updated_at",sortable:!1},{text:"Akcje",value:"actions",sortable:!1}],calls:{listing:(e=p(a().mark((function e(r,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.$apiOrder.my(r,n));case 1:case"end":return e.stop()}}),e)}))),function(t,r){return e.apply(this,arguments)})}}},methods:{cancel:function(e){var t=this;return p(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$refs.confirm.open("Potwierdź","Czy na pewno chcesz anulować zamówienie?");case 2:if(!r.sent){r.next=16;break}return r.prev=3,t.isLoading=!0,r.next=7,t.$apiOrder.cancel(e.id);case 7:return t.$notifier.showMessage({content:"Zamówienie zostało anulowane",color:"green"}),r.next=10,t.refreshTable();case 10:t.isLoading=!1,r.next=16;break;case 13:r.prev=13,r.t0=r.catch(3),t.handleErrors(r.t0);case 16:case"end":return r.stop()}}),r,null,[[3,13]])})))()},confirm:function(e){var t=this;return p(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$refs.confirm.open("Potwierdź","Czy na pewno chcesz potwierdzić otrzymanie zamówienia?");case 2:if(!r.sent){r.next=16;break}return r.prev=3,t.isLoading=!0,r.next=7,t.$apiOrder.confirm(e.id);case 7:return t.$notifier.showMessage({content:"Zamówienie zostało potwierdzone.",color:"green"}),r.next=10,t.refreshTable();case 10:t.isLoading=!1,r.next=16;break;case 13:r.prev=13,r.t0=r.catch(3),t.handleErrors(r.t0);case 16:case"end":return r.stop()}}),r,null,[[3,13]])})))()}}};var v=r(1900);const m=(0,v.Z)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,options:e.options,"server-items-length":e.total,loading:e.isLoading,"item-key":"id","show-expand":""},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"expanded-item",fn:function(e){var t=e.headers,n=e.item;return[r("td",{attrs:{colspan:t.length}},[r("ExpandedComponent",{attrs:{id:n.id}})],1)]}},{key:"item.price",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(r.price)+" PLN\n        ")]}},{key:"item.supporter_id",fn:function(t){var n=t.item;return[n.supporter?[e._v("\n                "+e._s(n.supporter.first_name)+" "+e._s(n.supporter.last_name)+"\n            ")]:[r("i",{staticClass:"text-caption"},[e._v("Nie wyznaczono")])]]}},{key:"item.status",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(e._f("orderStatus")(r.status))+"\n        ")]}},{key:"item.created_at",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(e._f("humanDate")(r.created_at))+"\n        ")]}},{key:"item.updated_at",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(e._f("humanDate")(r.updated_at))+"\n        ")]}},{key:"item.actions",fn:function(t){var n=t.item;return[e.$aclOrder.canCancel(n,e.user)?[r("v-btn",{attrs:{"x-small":"",color:"error"},on:{click:function(t){return e.cancel(n)}}},[e._v("Anuluj")])]:e._e(),e._v(" "),e.$aclOrder.canConfirm(n,e.user)?[r("v-btn",{attrs:{"x-small":"",color:"success"},on:{click:function(t){return e.confirm(n)}}},[e._v("Potwierdzam dostarczenie")])]:e._e()]}}])}),e._v(" "),r("v-config-dialog",{ref:"confirm"})],1)}),[],!1,null,null,null).exports;function h(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){h(a,n,o,i,s,"next",e)}function s(e){h(a,n,o,i,s,"throw",e)}i(void 0)}))}}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y={mixins:[i.Z,s.Z],computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,n.Se)({user:"auth/user"})),components:{ExpandedComponent:c.Z},data:function(){var e,t=this;return{options:{},headers:[{text:"Wartość zamówienia",value:"price",sortable:!1},{text:"Zamawiający",value:"user_id",sortable:!1},{text:"Status",value:"status",sortable:!1},{text:"Data złożenia zamówienia",value:"created_at",sortable:!1},{text:"Ostatnio zmieniono",value:"updated_at",sortable:!1},{text:"Akcje",value:"actions",sortable:!1}],calls:{listing:(e=_(a().mark((function e(r,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.$apiOrder.my(r,n));case 1:case"end":return e.stop()}}),e)}))),function(t,r){return e.apply(this,arguments)})}}},methods:{inProgress:function(e){var t=this;return _(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.isLoading=!0,r.next=3,t.$apiOrder.inProgress(e.id);case 3:return t.$notifier.showMessage({content:"Dzięki!",color:"green"}),r.next=6,t.refreshTable();case 6:t.isLoading=!1;case 7:case"end":return r.stop()}}),r)})))()},done:function(e){var t=this;return _(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$refs.confirm.open("Potwierdź","Czy na pewno chcesz się potwierdzić dostarczenie zamówienia?");case 2:if(!r.sent){r.next=16;break}return r.prev=3,t.isLoading=!0,r.next=7,t.$apiOrder.done(e.id);case 7:return t.$notifier.showMessage({content:"Super, zostałeś przypisany do zamówienia!",color:"green"}),r.next=10,t.refreshTable();case 10:t.isLoading=!1,r.next=16;break;case 13:r.prev=13,r.t0=r.catch(3),t.handleErrors(r.t0);case 16:case"end":return r.stop()}}),r,null,[[3,13]])})))()}}};function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const P={components:{SeniorComponent:m,SupporterComponent:(0,v.Z)(y,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,options:e.options,"server-items-length":e.total,loading:e.isLoading,"item-key":"id","show-expand":""},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"expanded-item",fn:function(e){var t=e.headers,n=e.item;return[r("td",{attrs:{colspan:t.length}},[r("ExpandedComponent",{attrs:{id:n.id}})],1)]}},{key:"item.price",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(r.price)+" PLN\n        ")]}},{key:"item.user_id",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(r.user.first_name)+" "+e._s(r.user.last_name)+"\n        ")]}},{key:"item.status",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(e._f("orderStatus")(r.status))+"\n        ")]}},{key:"item.created_at",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(e._f("humanDate")(r.created_at))+"\n        ")]}},{key:"item.updated_at",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(e._f("humanDate")(r.updated_at))+"\n        ")]}},{key:"item.actions",fn:function(t){var n=t.item;return[e.$aclOrder.canInProgress(n,e.user)?[r("v-btn",{attrs:{"x-small":"",dark:"",color:"blue"},on:{click:function(t){return e.inProgress(n)}}},[e._v("Jestem w trakcie zakupów")])]:e._e(),e._v(" "),e.$aclOrder.canDone(n,e.user)?[r("v-btn",{attrs:{"x-small":"",color:"success"},on:{click:function(t){return e.done(n)}}},[e._v("Dostarczyłem zamówienie")])]:e._e()]}}])}),e._v(" "),r("v-config-dialog",{ref:"confirm"})],1)}),[],!1,null,null,null).exports},data:function(){return{isLoading:!1}},computed:O(O({},(0,n.Se)({isSenior:"auth/isSenior",isSupporter:"auth/isSupporter"})),{},{component_name:function(){return this.isSenior?"SeniorComponent":"SupporterComponent"}}),methods:{setLoading:function(e){this.isLoading=e}}};const k=(0,v.Z)(P,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-card",{staticClass:"mx-auto",attrs:{loading:e.isLoading}},[r("v-card-title",{attrs:{dark:""}},[e._v("Moje zamówienia")]),e._v(" "),r("v-card-text",[r(e.component_name,{tag:"component",on:{setLoading:e.setLoading}})],1)],1)],1)}),[],!1,null,null,null).exports}}]);